Metadata-Version: 2.4
Name: nudge
Version: 0.1.0
Summary: Session-scoped hint cache for coding agents
Author-email: Test User <nobody@test.com>
License: MIT
Keywords: mcp,hints,agents,memory,cache
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Requires-Python: >=3.9
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: mcp>=1.0.0
Requires-Dist: wcmatch>=8.5
Provides-Extra: dev
Requires-Dist: pytest>=7.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21; extra == "dev"
Dynamic: license-file

# Nudge

A lightweight memory system that stores small, high-value hints (build commands, directories, env vars) for AI coding agents. Hints are matched by context (cwd, repo, branch, OS) and ranked by relevance.

## Concept of Operations
Coding agents often forget things as they code. We often have to "re-aim" them when they forget. Nudge is meant to help with this problem. It is, essentially, a dictionary of dictionaries. The top level dictionary's keys are "components", and the bottom level dictionary is "hints".

So, Imagine that you're working on an http-proxy of some sort in a docker container. The code agent is doing well, but once in a while, forgets that the code is in docker. You'd define the component as http-proxy, and the hint as build, like this:
nudge set http-proxy build "docker compose build http-proxy".

**Note:** Nudge runs as a single-instance server on your machine/container. All CLI commands and MCP agents communicate with this shared server over HTTP (localhost). The server starts automatically with Claude Code, or you can start it manually with `nudge serve`.

That's it. Whole idea. There's tags and other things that you can add to make it faster/easier to search, but the entire concept is that you have a store of hints per component that you and the llm share. You can add hints. The llm can add hints. You can use the hints. The llm can use the hints.

## Installation for Claude Code

**1. Install the package:**

```bash
cd /path/to/nudge
pip install -e .
```

**2. Add to Claude Code MCP configuration:**

The configuration file is located at:
- **macOS/Linux**: `~/.config/Claude/claude_code_config.json`
- **Windows**: `%APPDATA%\Claude\claude_code_config.json`

Create or edit this file to include:

```json
{
  "mcpServers": {
    "nudge": {
      "command": "nudge",
      "args": ["serve"]
    }
  }
}
```

**3. Restart Claude Code**

That's it! Nudge will automatically start when Claude Code launches.

## Adding Hints for the LLM

Use the CLI to add hints that the LLM can retrieve:

```bash
# Basic hint
nudge set my-project build "npm run build"

# Hint with context scoping
nudge set api test "pytest tests/" \
  --tags test,python \
  --scope-cwd-glob "**/api/**" \
  --scope-branch main,dev
```

The LLM will automatically find and use these hints when working in matching contexts.

## Available MCP Tools

- `nudge.get_hint` - Retrieve a hint by component/key
- `nudge.set_hint` - Store a new hint
- `nudge.query` - Search hints by tags/component
- `nudge.bump` - Increase frecency after successful use
- `nudge.list_components` - List all stored components
- `nudge.delete_hint` - Remove a hint
- `nudge.export` / `nudge.import` - Backup/restore hints

## Example Usage

```bash
# Store build commands for frontend and backend componets
nudge set frontend build "npm run build"
nudge set backend build "docker compose up --build"

# Store test commands
nudge set backend test "pytest -v" --tags test

# List all components
nudge ls

# List keys in a specific component
nudge ls backend
```

The LLM will automatically retrieve these hints when working on the frontend or backend, matching by your current directory and context.

## How It Works

- **Context-aware**: Hints match based on cwd, git repo, branch, OS
- **Ranked results**: Uses frecency (frequency + recency) scoring
- **Safe by default**: Guards against accidental secret storage
- **Session-persistent**: Hints stored in memory, cleared on restart

## Server Management

The server runs on HTTP port 8765 by default. You can customize this:

```bash
# Start server on custom port
nudge serve --port 9000

# Check if server is running
nudge status

# Stop the server
nudge stop
```

CLI commands auto-discover the server port from the PID file. You can also specify a port explicitly:

```bash
nudge -p 9000 ls
```

## CLI Reference

```bash
nudge serve [--port PORT]             # Start server (default: 8765)
nudge status                          # Check server status
nudge stop                            # Stop server
nudge set <component> <key> <value>   # Add hint
nudge get <component> <key>           # Retrieve hint
nudge query --component <name>        # Search hints
nudge bump <component> <key>          # Mark as used
nudge ls                              # List all components
nudge ls <component>                  # List keys in a component
nudge export > backup.json            # Backup
nudge import backup.json              # Restore
nudge -p PORT <command>               # Use specific port
```

## License

MIT - See [LICENSE](LICENSE)

## Documentation

Full specification: [docs/spec.md](docs/spec.md)
